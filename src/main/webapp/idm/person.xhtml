<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title><h:outputText value="#{msgs.cardUser}"/></title>
</h:head>
<h:body>
<h:form>
    <ui:include src="../resources/fragment/toolheader.xhtml"/>
</h:form>
<h:form>
<table style="width:850px;">
<tr><td style="width:350px;">
    <h:panelGrid columns="2" class="right-align-text">
        <h:outputText value="#{msgs.inputName} :"/>
        <h:outputText value="#{userManagerBean.currentUser.loginName}" styleClass="order-table-header"/>

        <h:outputText value="#{msgs.userName1} :"/>
        <h:inputText value="#{userManagerBean.currentUser.firstName}"
            valueChangeListener="#{userAttributeBean.changeFirstName}">
            <p:ajax event="valueChange" update="@form" />
        </h:inputText>
        <h:outputText value="#{msgs.userName2} :"/>
        <h:inputText value="#{userManagerBean.currentUser.lastName}">
            <p:ajax event="valueChange" update="@form" />
        </h:inputText>
        <h:outputText value="#{msgs.email} :"/>
        <h:inputText value="#{userManagerBean.currentUser.email}"
            valueChangeListener="#{userAttributeBean.changeEmail}">
            <p:ajax event="valueChange" update="@form" />
        </h:inputText>
        <h:outputText value="#{msgs.passwd}"/>
        <h:inputText value="#{userManagerBean.password}">
            <p:ajax event="valueChange" update="@form" />
        </h:inputText>
    </h:panelGrid>
</td><td>
    <h:panelGrid columns="2" >
        <h:outputText value="#{msgs.telephoneNumber} 1"/>
        <h:inputText value="#{userAttributeBean.telephoneNumber}"
            valueChangeListener="#{userAttributeBean.changeAttribute}">
            <p:ajax event="valueChange" update="@form"/>
            <f:param name="attributeLabel" value="telephoneNumber"/>
        </h:inputText>
        <h:outputText value="#{msgs.telephoneNumber} 2"/>
        <h:inputText value="#{userAttributeBean.mobile}"
                     valueChangeListener="#{userAttributeBean.changeAttribute}">
            <p:ajax event="valueChange" update="@form"/>
            <f:param name="attributeLabel" value="homePhone"/>
        </h:inputText>
        <h:outputText value="#{msgs.personTitle}"/>
        <h:inputTextarea value="#{userAttributeBean.title}"
            valueChangeListener="#{userAttributeBean.changeAttribute}">
            <p:ajax event="valueChange" update="@form"/>
            <f:param name="attributeLabel" value="title"/>
        </h:inputTextarea>
        <h:outputText value="#{msgs.o}"/>
        <h:inputTextarea value="#{userAttributeBean.organization}"
            valueChangeListener="#{userAttributeBean.changeAttribute}">
            <p:ajax event="valueChange" update="@form"/>
            <f:param name="attributeLabel" value="organization"/>
        </h:inputTextarea>
        <h:outputText value="#{msgs.description}"/>
        <h:inputTextarea value="#{userAttributeBean.description}"
            valueChangeListener="#{userAttributeBean.changeAttribute}">
            <p:ajax event="valueChange" update="@form"/>
            <f:param name="attributeLabel" value="description"/>
        </h:inputTextarea>
        <h:outputText value="#{msgs.postalCode}" />
        <h:inputText value="#{userAttributeBean.postalCode}"
            valueChangeListener="#{userAttributeBean.changeAttribute}">
            <p:ajax event="valueChange" update="@form"/>
            <f:param name="attributeLabel" value="postalCode"/>
        </h:inputText>
        <h:outputText value="#{msgs.postalAddress}" />
        <h:inputTextarea value="#{userAttributeBean.postalAddress}"
            valueChangeListener="#{userAttributeBean.changeAttribute}">
            <p:ajax event="valueChange" update="@form"/>
            <f:param name="attributeLabel" value="postalAddress"/>
        </h:inputTextarea>
    </h:panelGrid>
</td></tr>
</table>
    <h:outputText value="Пользователь с таким входным именем уже зарегистрирован!"
                  rendered="#{userAttributeBean.registered}" style="color:red;"/>
    <br/>
    <h:commandButton actionListener="#{userManagerBean.saveUser()}"
                     value="#{msgs.save}" update="@form"
                     disabled="#{userAttributeBean.saveDisabled}"/>
    <h:commandButton title="#{msgs.allUsers}" value="#{msgs.allUsers}"
                     actionListener="#{userManagerBean.setPageName(msgs.allUsers)}"
                     action="users.xhtml?faces-redirect=true">
    </h:commandButton>
</h:form>
</h:body>
</html>
