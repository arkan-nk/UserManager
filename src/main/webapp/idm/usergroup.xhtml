<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <title><h:outputText value="#{msgs.groupUser}"/></title>
</h:head>
<h:body>
<h:form>
    <ui:include src="../resources/fragment/toolheader.xhtml"/>
</h:form>
<h:panelGrid columns="2">
    <h:outputText value="#{msgs.inputName} :"/>
    <h:outputText value="#{userManagerBean.currentUser.loginName}" styleClass="order-table-header"/>
    <h:outputText value="#{msgs.userName1}"/>
    <h:outputText value="#{userManagerBean.currentUser.firstName}"/>
    <h:outputText value="#{msgs.userName2}"/>
    <h:outputText value="#{userManagerBean.currentUser.lastName}"/>
    <h:outputText value="#{msgs.email}"/>
    <h:outputText value="#{userManagerBean.currentUser.email}"/>
    <h:outputText value="#{msgs.telephoneNumber}"/>
    <h:outputText value="#{userManagerBean.currentUser.getAttribute('telephoneNumber').value}"/>
</h:panelGrid>
<br/>
<h:form>
<h3><h:outputText value="#{msgs.cuName}" rendered="#{not empty userGroupBean.listCuGroup}"/></h3>
<table>
    <ui:repeat value="#{userGroupBean.listCuGroup}" var="gCu">
        <tr><td>
            <h:outputText value="#{gCu.getAttribute('description').value}"/>
        </td><td>
            <h:commandButton value="#{msgs.toGetOut}"
                actionListener="#{groupBean.doGetOut(gCu, userManagerBean.currentUser, 0)}"
                action="#{userGroupBean.cleanMembership(gCu)}"/>
        </td></tr>
    </ui:repeat>
</table>
</h:form>
<br/>
<h:form>
<h3><h:outputText value="#{msgs.invName}" rendered="#{not empty userGroupBean.listInvGroup}"/></h3>
<table>
    <ui:repeat value="#{userGroupBean.listInvGroup}" var="gInv">
        <tr><td>
        <h:outputText value="#{gInv.getAttribute('description').value}"/>
        </td><td>
        <h:commandButton value="#{msgs.toGetOut}"
            actionListener="#{groupBean.doGetOut(gInv, userManager.currentUser, 5)}"
            action="#{userGroupBean.cleanMembership(gInv)}"/>
        </td></tr>
    </ui:repeat>
</table>
</h:form>
<br/>
<h:form>
<h3><h:outputText value="#{msgs.dispName}" rendered="#{not empty userGroupBean.listDispGroup}"/></h3>
<table>
       <ui:repeat value="#{userGroupBean.listDispGroup}" var="gDisp">
       <tr><td>
            <h:outputText value="#{gDisp.getAttribute('description').value}"/>
       </td><td>
            <h:commandButton value="#{msgs.toGetOut}"
                actionListener="#{groupBean.doGetOut(gDisp, userManagerBean.currentUser, 1)}"
                action="#{userGroupBean.cleanMembership(gDisp)}"/>
       </td></tr>
       </ui:repeat>
</table>
</h:form>
<br/>
<h:form>
<h3><h:outputText value="#{msgs.repairName}" rendered="#{not empty userGroupBean.listRepairGroup}"/></h3>
<table>
    <ui:repeat value="#{userGroupBean.listRepairGroup}" var="gRepair">
        <tr><td>
            <h:outputText value="#{gRepair.getAttribute('description').value}"/>
        </td><td>
            <h:commandButton value="#{msgs.toGetOut}"
                actionListener="#{groupBean.doGetOut(gRepair, userManager.currentUser, 6)}"
                action="#{userGroupBean.cleanMembership(gRepair)}"/>
        </td></tr>
    </ui:repeat>
</table>
</h:form>
<h:form>
    <h:commandButton title="#{msgs.dropUser}" value="#{msgs.dropUser}"
        disabled="#{not userGroupBean.isNoMemberShip()}"
        actionListener="#{userManagerBean.dropUser()}" action="users.xhtml?faces-redirect=true"/>
    <h:commandButton title="#{msgs.allUsers}" value="#{msgs.allUsers}"
        actionListener="#{userManagerBean.setPageName(msgs.allUsers)}"
        action="users.xhtml?faces-redirect=true">
    </h:commandButton>
</h:form>
</h:body>
</html>